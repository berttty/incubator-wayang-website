<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

      http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    


    <title>Apache Wayang - Read Me</title>
    <link rel="icon" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/img/logo/favicon-pluma.ico">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
    <link rel="stylesheet" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/css/color.css">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

    <link rel="stylesheet" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/css/monokai.css">
    <link rel="stylesheet" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/css/main.css">

    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,300;1,400;1,700&display=swap" rel="stylesheet">

    <style>
        body{
            font-family: 'Ubuntu', sans-serif;
        }
    </style>
</head>
<body>

<header class="navbar navbar-expand flex-column flex-md-row bd-navbar p-0 shadow sticky-top" style=" height: 75px !important; background-color: #ffffff">

    <div class="col-md-3 col-xl-2 text-center"style="border-right: #a00e5a 1px solid; height: 100%">
      <a class="navbar-brand mr-auto" href="/docs/0.6.0-SNAPSHOT/">
        <img style="max-height: inherit; height: 2.6em;" src="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/img/logo/logo_400x160.png"/>
      </a>
    </div>
    <div class="col-md-9 col-xl-8" role="main">
        <h3 style="color: #ff8724">Documentation Apache Wayang</h3>
    </div>

</header>

<div class="container-fluid">
  <div class="row flex-xl-nowrap">
    <div class="col-md-3 col-xl-2 bd-sidebar pt-3 px-0" style="min-height: 95vh; border-right: solid 1px #a00e5a; background-color: #F5F7F9">
      <ul id="main-menu" class="nav flex-column nav-pills">
        









<li class="nav-item">
    
        <a class="nav-link active" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/" title="Go to Read Me">
            Read Me
        </a>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/what_is_wayang/" title="Go to What is Wayang?">
                What is Wayang?
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_what_is_wayang" role="button" aria-expanded="false" aria-controls="submenu_what_is_wayang">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_what_is_wayang">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/what_is_wayang/concepts_wayang/" title="Go to Concepts">
            Concepts
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/" title="Go to Getting Started with Wayang">
                Getting Started with Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_getting_start" role="button" aria-expanded="false" aria-controls="submenu_getting_start">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_getting_start">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_build/" title="Go to How To Build Wayang">
                How To Build Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_getting_starthow_build" role="button" aria-expanded="false" aria-controls="submenu_getting_starthow_build">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_getting_starthow_build">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_build/build_step/" title="Go to Step by Step Building Wayang">
            Step by Step Building Wayang
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_install/" title="Go to How To Install Wayang">
                How To Install Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_getting_starthow_install" role="button" aria-expanded="false" aria-controls="submenu_getting_starthow_install">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_getting_starthow_install">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_install/install_step/" title="Go to Step by Step Building Wayang">
            Step by Step Building Wayang
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_run/" title="Go to How To Run Wayang">
                How To Run Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_getting_starthow_run" role="button" aria-expanded="false" aria-controls="submenu_getting_starthow_run">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_getting_starthow_run">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/how_run/run_step/" title="Go to Step by Step Run Wayang">
            Step by Step Run Wayang
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/getting_start/writting_plan_wayang/" title="Go to Writting a Plan with Wayang">
            Writting a Plan with Wayang
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/using_wayang/" title="Go to Using Wayang">
                Using Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_using_wayang" role="button" aria-expanded="false" aria-controls="submenu_using_wayang">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_using_wayang">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/using_wayang/api_java_scala/" title="Go to API Java/Scala">
            API Java/Scala
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/using_wayang/api_python/" title="Go to API Python">
            API Python
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/using_wayang/api_rest/" title="Go to API REST">
            API REST
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/using_wayang/cost_model_calibration/" title="Go to Cost Model Calibration">
            Cost Model Calibration
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/" title="Go to Extending Wayang">
                Extending Wayang
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_extending_wayang" role="button" aria-expanded="false" aria-controls="submenu_extending_wayang">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_extending_wayang">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/" title="Go to Adding Platform">
                Adding Platform
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_extending_wayangadding_platform" role="button" aria-expanded="false" aria-controls="submenu_extending_wayangadding_platform">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_extending_wayangadding_platform">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/creating_plugin/" title="Go to Creating plugin">
            Creating plugin
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/creating_operator/" title="Go to Creating an Operator">
            Creating an Operator
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/creating_mapping/" title="Go to Creating a Mapping">
            Creating a Mapping
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/creating_channel/" title="Go to Creating a Channels">
            Creating a Channels
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/Creating_compiler/" title="Go to Creating Compiler">
            Creating Compiler
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/wrapping_udfs/" title="Go to Wrapping UDF's">
            Wrapping UDF's
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/extending_wayang/adding_platform/others/" title="Go to Others considerations">
            Others considerations
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/" title="Go to How To Contribute">
                How To Contribute
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_how_contribute" role="button" aria-expanded="false" aria-controls="submenu_how_contribute">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_how_contribute">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/bugs_report/" title="Go to Bugs Report">
            Bugs Report
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/jira_issue_maintenance/" title="Go to Jira Issue Maintenance">
            Jira Issue Maintenance
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/documentation_changes/" title="Go to Documentation Changes">
            Documentation Changes
        </a>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/" title="Go to Code Changes">
                Code Changes
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_how_contributecode_changes" role="button" aria-expanded="false" aria-controls="submenu_how_contributecode_changes">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_how_contributecode_changes">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/choosing_what_contribute/" title="Go to Choosing What to Contribute">
            Choosing What to Contribute
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/code_review_criteria/" title="Go to Code Review Criteria">
            Code Review Criteria
        </a>
    
</li>











<li class="nav-item">
    
        <div class="d-flex justify-content-between nav-link main-link ">
            <a class="p-2" href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/" title="Go to Preparing to Contribute Code Changes">
                Preparing to Contribute Code Changes
            </a>
            <a class="p-2 align-self-center" data-toggle="collapse" href="#submenu_how_contributecode_changespreparing_contribute_code_changes" role="button" aria-expanded="false" aria-controls="submenu_how_contributecode_changespreparing_contribute_code_changes">
                <i class="fas fa-chevron-down"></i>
            </a>
        </div>
        <div class="collapse sub-menu" id="submenu_how_contributecode_changespreparing_contribute_code_changes">
            <ul class="flex-column nav">
                
                









<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/jira_issue/" title="Go to Jira issues">
            Jira issues
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/pull_request/" title="Go to Pull Request">
            Pull Request
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/closing_pull_request/" title="Go to Closing Your Pull Request and Github Issues">
            Closing Your Pull Request and Github Issues
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/review_process/" title="Go to The Review Process">
            The Review Process
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/code_changes/preparing_contribute_code_changes/code_style_guide/" title="Go to Code Style Guide">
            Code Style Guide
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>


                
                
            </ul>
        </div>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/reviewing_changes/" title="Go to Reviewing Changes">
            Reviewing Changes
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/testing_releases/" title="Go to Testing Releases">
            Testing Releases
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/user_libraries_wayang/" title="Go to User Libraries to Wayang">
            User Libraries to Wayang
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/helping_users/" title="Go to Helping Other Users">
            Helping Other Users
        </a>
    
</li>











<li class="nav-item">
    
        <a class="nav-link " href="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/how_contribute/slack_channels/" title="Go to Slack Channels">
            Slack Channels
        </a>
    
</li>


                
                
            </ul>
        </div>
    
</li>




        <!--        <a class="nav-link active" href="#">Read Me</a>-->
<!--        <a class="nav-link main-link" href="how_contribute" tabindex="-1" aria-disabled="true">How To Contribute</a>-->
<!--        <a class="nav-link" href="how_contribute">Bugs Report</a>-->
<!--        <a class="nav-link" href="#">Jira Issue Maintenance</a>-->
<!--        <a class="nav-link" href="#">Documentation Changes</a>-->
<!--        <a class="nav-link" href="#">Code Changes</a>-->
<!--        <a class="nav-link" href="#">Code Changes - Choosing What to Contribute</a>-->
<!--        <a class="nav-link" href="#">Code Changes - Code Review Criteria</a>-->
<!--        <a class="nav-link" href="#">Code Changes - Preparing to Contribute Code Changes</a>-->
<!--        <a class="nav-link" href="#">Review Changes</a>-->
<!--        <a class="nav-link" href="#">Testing Releases</a>-->
<!--        <a class="nav-link" href="#">User Libraries to Wayang</a>-->
<!--        <a class="nav-link" href="#">Helping Other Users</a>-->
<!--        <a class="nav-link" href="#">Slack Channel and Emails</a>-->
<!--        <a class="nav-link main-link" href="#" tabindex="-1" aria-disabled="true">How To Build Wayang</a>-->
<!--        <a class="nav-link" href="#">Building Wayang</a>-->
<!--        <a class="nav-link main-link" href="#" tabindex="-1" aria-disabled="true">How To Install Wayang</a>-->
<!--        <a class="nav-link" href="#">Installing Wayang</a>-->
<!--        <a class="nav-link main-link" href="#" tabindex="-1" aria-disabled="true">How To Run Wayang</a>-->
<!--        <a class="nav-link" href="#">Running Wayang</a>-->
      </ul>
    </div>
<!--    TODO: validate if is usable-->
<!--    <nav class="d-none d-xl-block col-xl-2 bd-toc" aria-label="Secondary navigation">-->
<!--      <ul class="section-nav">-->
<!--        <li class="toc-entry toc-h2"><a href="#base-nav">Base nav</a></li>-->
<!--        <li class="toc-entry toc-h2"><a href="#available-styles">Available styles</a>-->
<!--          <ul>-->
<!--            <li class="toc-entry toc-h3"><a href="#horizontal-alignment">Horizontal alignment</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#vertical">Vertical</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#tabs">Tabs</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#pills">Pills</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#fill-and-justify">Fill and justify</a></li>-->
<!--          </ul>-->
<!--        </li>-->
<!--        <li class="toc-entry toc-h2"><a href="#working-with-flex-utilities">Working with flex utilities</a></li>-->
<!--        <li class="toc-entry toc-h2"><a href="#regarding-accessibility">Regarding accessibility</a></li>-->
<!--        <li class="toc-entry toc-h2"><a href="#using-dropdowns">Using dropdowns</a>-->
<!--          <ul>-->
<!--            <li class="toc-entry toc-h3"><a href="#tabs-with-dropdowns">Tabs with dropdowns</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#pills-with-dropdowns">Pills with dropdowns</a></li>-->
<!--          </ul>-->
<!--        </li>-->
<!--        <li class="toc-entry toc-h2"><a href="#javascript-behavior">JavaScript behavior</a>-->
<!--          <ul>-->
<!--            <li class="toc-entry toc-h3"><a href="#using-data-attributes">Using data attributes</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#via-javascript">Via JavaScript</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#fade-effect">Fade effect</a></li>-->
<!--            <li class="toc-entry toc-h3"><a href="#methods">Methods</a>-->
<!--              <ul>-->
<!--                <li class="toc-entry toc-h4"><a href="#tab">$().tab</a></li>-->
<!--                <li class="toc-entry toc-h4"><a href="#tabshow">.tab(‘show’)</a></li>-->
<!--                <li class="toc-entry toc-h4"><a href="#tabdispose">.tab(‘dispose’)</a></li>-->
<!--              </ul>-->
<!--            </li>-->
<!--            <li class="toc-entry toc-h3"><a href="#events">Events</a></li>-->
<!--          </ul>-->
<!--        </li>-->
<!--      </ul>-->
<!--    </nav>-->
    <main class="col-md-9 col-xl-8 py-md-3 pl-md-5 bd-content" role="main">
      <h1 id="apache-wayang-">Apache Wayang <img align="right" style="margin-top: -0.5em;" width="170px" src="https://wayang.apache.org/assets/img/logo/logo_400x160.png" alt="Wayang logo" /></h1>

<p><a href="https://travis-ci.org/wayang-ecosystem/wayang"><img src="https://travis-ci.org/wayang-ecosystem/wayang.svg?branch=master" alt="Build Status (Travis)" /></a>
<a href="https://gitter.im/wayang-ecosystem/Lobby"><img src="https://badges.gitter.im/wayang-ecosystem/Lobby.png" alt="Gitter chat" /></a>
<a href="https://maven-badges.herokuapp.com/maven-central/org.apache.wayang/wayang"><img src="https://maven-badges.herokuapp.com/maven-central/org.apache.wayang/wayang/badge.svg" alt="Maven Central" /></a></p>

<h4 id="turning-a-shadows-into-a-show">Turning a shadows into a show</h4>

<p>Apache Wayang in contrast to classical data processing systems that provide one dedicated execution engine, Apache Wayang rather is a <em>meta processing framework</em>: You can specify your data processing app via one of Wayang’s API and then Wayang will pick an optimal configuration of classical processing frameworks, such as Java Streams or Apache Spark, to run your app on. Finally, Wayang will also perform the execution, thereby hiding the different specific platform APIs and coordinate inter-platform communication.</p>

<p>This approach aims at freeing data engineers and software developers from the burden of knowing the zoo of different data processing systems, their APIs, strengths and weakness; the intricacies of coordinating and integrating different processing platforms; and the inflexibility when tying to a fix set of processing platforms. As of now, Wayang has built in support for the following processing platforms:</p>
<ul>
  <li>Java 8 Streams</li>
  <li><a href="https://spark.apache.org/">Apache Spark</a></li>
  <li><a href="https://github.com/GraphChi/graphchi-java">GraphChi</a></li>
  <li><a href="http://www.postgresql.org">Postgres</a></li>
  <li><a href="https://www.sqlite.org/">SQLite</a></li>
</ul>

<h2 id="how-to-use-wayang">How to use Wayang</h2>

<p><strong>Requirements.</strong>
Apache Wayang is built with Java 8 and Scala 2.11. However, to execute Wayang it is sufficient to have Java 8 installed. If you want to build Wayang yourself, you will also need to have <a href="http://maven.apache.org">Apache Maven</a> installed. Please also consider that processing platforms employed by Wayang might have further requirements.</p>

<p><strong>Get Wayang.</strong>
Wayang is available via Maven Central. To use it with Maven, for instance, include the following into you POM file:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;dependency&gt;</span> 
  <span class="nt">&lt;groupId&gt;</span>org.apache.wayang<span class="nt">&lt;/groupId&gt;</span>
  <span class="nt">&lt;artifactId&gt;</span>wayang-***<span class="nt">&lt;/artifactId&gt;</span>
  <span class="nt">&lt;version&gt;</span>0.3.0<span class="nt">&lt;/version&gt;</span> 
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div></div>
<p>Note the <code class="language-plaintext highlighter-rouge">***</code>: Wayang ships with multiple modules that can be included in your app, depending on how you want to use it:</p>
<ul>
  <li><code class="language-plaintext highlighter-rouge">wayang-core</code>: provides core data structures and the optimizer (required)</li>
  <li><code class="language-plaintext highlighter-rouge">wayang-basic</code>: provides common operators and data types for your apps (recommended)</li>
  <li><code class="language-plaintext highlighter-rouge">wayang-api</code>: provides an easy-to-use Scala and Java API to assemble Wayang plans (recommended)</li>
  <li><code class="language-plaintext highlighter-rouge">wayang-java</code>, <code class="language-plaintext highlighter-rouge">wayang-spark</code>, <code class="language-plaintext highlighter-rouge">wayang-graphchi</code>, <code class="language-plaintext highlighter-rouge">wayang-sqlite3</code>, <code class="language-plaintext highlighter-rouge">wayang-postgres</code>: adapters for the various supported processing platforms</li>
  <li><code class="language-plaintext highlighter-rouge">wayang-profiler</code>: provides functionality to learn operator and UDF cost functions from historical execution data</li>
</ul>

<p>For the sake of version flexibility, you still have to include your Hadoop (<code class="language-plaintext highlighter-rouge">hadoop-hdfs</code> and <code class="language-plaintext highlighter-rouge">hadoop-common</code>) and Spark (<code class="language-plaintext highlighter-rouge">spark-core</code> and <code class="language-plaintext highlighter-rouge">spark-graphx</code>) version of choice.</p>

<p>In addition, you can obtain the most recent snapshot version of Wayang via Sonatype’s snapshot repository. Just included</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;repositories&gt;</span>
  <span class="nt">&lt;repository&gt;</span>
    <span class="nt">&lt;id&gt;</span>sonatype-snapshots<span class="nt">&lt;/id&gt;</span>
    <span class="nt">&lt;name&gt;</span>Sonatype Snapshot Repository<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;url&gt;</span>https://oss.sonatype.org/content/repositories/snapshots<span class="nt">&lt;/url&gt;</span>
  <span class="nt">&lt;/repository&gt;</span>
<span class="nt">&lt;repositories&gt;</span>
</code></pre></div></div>

<p>If you need to rebuild Wayang, e.g., to use a different Scala version, you can simply do so via Maven:</p>

<ol>
  <li>Adapt the version variables (e.g., <code class="language-plaintext highlighter-rouge">spark.version</code>) in the main <code class="language-plaintext highlighter-rouge">pom.xml</code> file.</li>
  <li>Build Wayang with the adapted versions.
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>mvn clean <span class="nb">install</span>
</code></pre></div>    </div>
    <p>Note the <code class="language-plaintext highlighter-rouge">standalone</code> profile to fix Hadoop and Spark versions, so that Wayang apps do not explicitly need to declare the corresponding dependencies.
Also, note the <code class="language-plaintext highlighter-rouge">distro</code> profile, which assembles a binary Wayang distribution.
To activate these profiles, you need to specify them when running maven, i.e.,</p>
    <div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code> mvn clean <span class="nb">install</span> <span class="nt">-P</span>&lt;profile name&gt;
</code></pre></div>    </div>
  </li>
</ol>

<p><strong>Configure Wayang.</strong> In order for Wayang to work properly, it is necessary to tell Wayang about the capacities of your processing platforms and how to reach them. While there is a default configuration that allows to test Wayang right away, we recommend to create a properties file to adapt the configuration where necessary. To have Wayang use that configuration transparently, just run you app via</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>java <span class="nt">-Dwayang</span>.configuration<span class="o">=</span>url://to/my/wayang.properties ...
</code></pre></div></div>

<p>You can find the most relevant settings in the following:</p>
<ul>
  <li>General settings
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wayang.core.log.enabled (= true)</code>: whether to log execution statistics to allow learning better cardinality and cost estimators for the optimizer</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.core.log.executions (= ~/.wayang/executions.json)</code> where to log execution times of operator groups</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.core.log.cardinalities (= ~/.wayang/cardinalities.json)</code> where to log cardinality measurements</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.core.optimizer.instrumentation (= org.apache.wayang.core.profiling.OutboundInstrumentationStrategy)</code>: where to measure cardinalities in Wayang plans; other options are <code class="language-plaintext highlighter-rouge">org.apache.wayang.core.profiling.NoInstrumentationStrategy</code> and <code class="language-plaintext highlighter-rouge">org.apache.wayang.core.profiling.FullInstrumentationStrategy</code></li>
      <li><code class="language-plaintext highlighter-rouge">wayang.core.optimizer.reoptimize (= false)</code>: whether to progressively optimize Wayang plans</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.basic.tempdir (= file:///tmp)</code>: where to store temporary files, in particular for inter-platform communication</li>
    </ul>
  </li>
  <li>Java Streams
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wayang.java.cpu.mhz (= 2700)</code>: clock frequency of processor the JVM runs on in MHz</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.java.hdfs.ms-per-mb (= 2.7)</code>: average throughput from HDFS to JVM in ms/MB</li>
    </ul>
  </li>
  <li>Apache Spark
    <ul>
      <li><code class="language-plaintext highlighter-rouge">spark.master (= local)</code>: Spark master
        <ul>
          <li>various other Spark settings are supported, e.g., <code class="language-plaintext highlighter-rouge">spark.executor.memory</code>, <code class="language-plaintext highlighter-rouge">spark.serializer</code>, …</li>
        </ul>
      </li>
      <li><code class="language-plaintext highlighter-rouge">wayang.spark.cpu.mhz (= 2700)</code>: clock frequency of processor the Spark workers run on in MHz</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.spark.hdfs.ms-per-mb (= 2.7)</code>: average throughput from HDFS to the Spark workers in ms/MB</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.spark.network.ms-per-mb (= 8.6)</code>: average network throughput of the Spark workers in ms/MB</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.spark.init.ms (= 4500)</code>: time it takes Spark to initialize in ms</li>
    </ul>
  </li>
  <li>GraphChi
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wayang.graphchi.cpu.mhz (= 2700)</code>: clock frequency of processor GraphChi runs on in MHz</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.graphchi.cpu.cores (= 2)</code>: number of cores GraphChi runs on</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.graphchi.hdfs.ms-per-mb (= 2.7)</code>: average throughput from HDFS to GraphChi in ms/MB</li>
    </ul>
  </li>
  <li>SQLite
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wayang.sqlite3.jdbc.url</code>: JDBC URL to use SQLite</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.sqlite3.jdbc.user</code>: optional user name</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.sqlite3.jdbc.password</code>: optional password</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.sqlite3.cpu.mhz (= 2700)</code>: clock frequency of processor SQLite runs on in MHz</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.sqlite3.cpu.cores (= 2)</code>: number of cores SQLite runs on</li>
    </ul>
  </li>
  <li>PostgreSQL
    <ul>
      <li><code class="language-plaintext highlighter-rouge">wayang.postgres.jdbc.url</code>: JDBC URL to use PostgreSQL</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.postgres.jdbc.user</code>: optional user name</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.postgres.jdbc.password</code>: optional password</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.postgres.cpu.mhz (= 2700)</code>: clock frequency of processor PostgreSQL runs on in MHz</li>
      <li><code class="language-plaintext highlighter-rouge">wayang.postgres.cpu.cores (= 2)</code>: number of cores PostgreSQL runs on</li>
    </ul>
  </li>
</ul>

<p><strong>Code with Wayang.</strong> The recommended way to specify your apps with Wayang is via its Scala or Java API from the <code class="language-plaintext highlighter-rouge">wayang-api</code> module. You can find examples below.</p>

<p><strong>Learn cost functions.</strong>
Wayang provides a utility to learn cost functions from historical execution data.
Specifically, Wayang can learn configurations for load profile estimators (that estimate CPU load, disk load etc.) for both operators and UDFs, as long as the configuration provides a template for those estimators.
As an example, the <code class="language-plaintext highlighter-rouge">JavaMapOperator</code> draws its load profile estimator configuration via the configuration key <code class="language-plaintext highlighter-rouge">wayang.java.map.load</code>.
Now, it is possible to specify a load profile estimator template in the configuration under the key <code class="language-plaintext highlighter-rouge">&lt;original key&gt;.template</code>, e.g.:</p>
<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wayang.java.map.load.template = {\
  "in":1, "out":1,\
  "cpu":"?*in0"\
}
</code></pre></div></div>
<p>This template specifies a load profile estimator that expects (at least) one input cardinality and one output cardinality.
Further, it models a CPU load that is proportional to the input cardinality.
However, more complex functions are possible.
In particular, you can use</p>
<ul>
  <li>the variables <code class="language-plaintext highlighter-rouge">in0</code>, <code class="language-plaintext highlighter-rouge">in1</code>, … and <code class="language-plaintext highlighter-rouge">out0</code>, <code class="language-plaintext highlighter-rouge">out1</code>, … to incorporate the input and output cardinalities, respectively;</li>
  <li>operator properties, such as <code class="language-plaintext highlighter-rouge">numIterations</code> for the <code class="language-plaintext highlighter-rouge">PageRankOperator</code> implementations;</li>
  <li>the operators <code class="language-plaintext highlighter-rouge">+</code>, <code class="language-plaintext highlighter-rouge">-</code>, <code class="language-plaintext highlighter-rouge">*</code>, <code class="language-plaintext highlighter-rouge">/</code>, <code class="language-plaintext highlighter-rouge">%</code>, <code class="language-plaintext highlighter-rouge">^</code>, and parantheses;</li>
  <li>the functions <code class="language-plaintext highlighter-rouge">min(x0, x1, ...))</code>, <code class="language-plaintext highlighter-rouge">max(x0, x1, ...)</code>, <code class="language-plaintext highlighter-rouge">abs(x)</code>, <code class="language-plaintext highlighter-rouge">log(x, base)</code>, <code class="language-plaintext highlighter-rouge">ln(x)</code>, <code class="language-plaintext highlighter-rouge">ld(x)</code>;</li>
  <li>and the constants <code class="language-plaintext highlighter-rouge">e</code> and <code class="language-plaintext highlighter-rouge">pi</code>.</li>
</ul>

<p>While Wayang specifies templates for all execution operators, you will need to specify that your UDFs are modelled by some configuration-based cost function (see the k-means example below) and create the according initial specification and template yourself.
Once, you gathered execution data, you can run</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>java ... org.apache.wayang.profiler.ga.GeneticOptimizerApp <span class="o">[</span>configuration URL <span class="o">[</span>execution log]]
</code></pre></div></div>
<p>This app will try to find appropriate values for the question marks (<code class="language-plaintext highlighter-rouge">?</code>) in the load profile estimator templates to fit the gathered execution data and ready-made configuration entries for the load profile estimators.
You can then copy them into your configuration.</p>

<h2 id="examples">Examples</h2>

<p>For some executable examples, have a look at <a href="https://github.com/sekruse/rheem-examples">this repository</a>.</p>

<h3 id="wordcount">WordCount</h3>

<p>The “Hello World!” of data processing systems is the wordcount.</p>

<h4 id="java-api">Java API</h4>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">org.apache.wayang.api.JavaPlanBuilder</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.basic.data.Tuple2</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.core.api.Configuration</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.core.api.WayangContext</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.core.optimizer.cardinality.DefaultCardinalityEstimator</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.java.Java</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.apache.wayang.spark.Spark</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Collection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">WordcountJava</span> <span class="o">{</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">){</span>

        <span class="c1">// Settings</span>
        <span class="nc">String</span> <span class="n">inputUrl</span> <span class="o">=</span> <span class="s">"file:/tmp.txt"</span><span class="o">;</span>

        <span class="c1">// Get a plan builder.</span>
        <span class="nc">WayangContext</span> <span class="n">wayangContext</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WayangContext</span><span class="o">(</span><span class="k">new</span> <span class="nc">Configuration</span><span class="o">())</span>
                <span class="o">.</span><span class="na">withPlugin</span><span class="o">(</span><span class="nc">Java</span><span class="o">.</span><span class="na">basicPlugin</span><span class="o">())</span>
                <span class="o">.</span><span class="na">withPlugin</span><span class="o">(</span><span class="nc">Spark</span><span class="o">.</span><span class="na">basicPlugin</span><span class="o">());</span>
        <span class="nc">JavaPlanBuilder</span> <span class="n">planBuilder</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">JavaPlanBuilder</span><span class="o">(</span><span class="n">wayangContext</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withJobName</span><span class="o">(</span><span class="nc">String</span><span class="o">.</span><span class="na">format</span><span class="o">(</span><span class="s">"WordCount (%s)"</span><span class="o">,</span> <span class="n">inputUrl</span><span class="o">))</span>
                <span class="o">.</span><span class="na">withUdfJarOf</span><span class="o">(</span><span class="nc">WordcountJava</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>

        <span class="c1">// Start building the WayangPlan.</span>
        <span class="nc">Collection</span><span class="o">&lt;</span><span class="nc">Tuple2</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">,</span> <span class="nc">Integer</span><span class="o">&gt;&gt;</span> <span class="n">wordcounts</span> <span class="o">=</span> <span class="n">planBuilder</span>
                <span class="c1">// Read the text file.</span>
                <span class="o">.</span><span class="na">readTextFile</span><span class="o">(</span><span class="n">inputUrl</span><span class="o">).</span><span class="na">withName</span><span class="o">(</span><span class="s">"Load file"</span><span class="o">)</span>

                <span class="c1">// Split each line by non-word characters.</span>
                <span class="o">.</span><span class="na">flatMap</span><span class="o">(</span><span class="n">line</span> <span class="o">-&gt;</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="n">line</span><span class="o">.</span><span class="na">split</span><span class="o">(</span><span class="s">"\\W+"</span><span class="o">)))</span>
                <span class="o">.</span><span class="na">withSelectivity</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span> <span class="mi">100</span><span class="o">,</span> <span class="mf">0.9</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withName</span><span class="o">(</span><span class="s">"Split words"</span><span class="o">)</span>

                <span class="c1">// Filter empty tokens.</span>
                <span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="n">token</span> <span class="o">-&gt;</span> <span class="o">!</span><span class="n">token</span><span class="o">.</span><span class="na">isEmpty</span><span class="o">())</span>
                <span class="o">.</span><span class="na">withSelectivity</span><span class="o">(</span><span class="mf">0.99</span><span class="o">,</span> <span class="mf">0.99</span><span class="o">,</span> <span class="mf">0.99</span><span class="o">)</span>
                <span class="o">.</span><span class="na">withName</span><span class="o">(</span><span class="s">"Filter empty words"</span><span class="o">)</span>

                <span class="c1">// Attach counter to each word.</span>
                <span class="o">.</span><span class="na">map</span><span class="o">(</span><span class="n">word</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Tuple2</span><span class="o">&lt;&gt;(</span><span class="n">word</span><span class="o">.</span><span class="na">toLowerCase</span><span class="o">(),</span> <span class="mi">1</span><span class="o">)).</span><span class="na">withName</span><span class="o">(</span><span class="s">"To lower case, add counter"</span><span class="o">)</span>

                <span class="c1">// Sum up counters for every word.</span>
                <span class="o">.</span><span class="na">reduceByKey</span><span class="o">(</span>
                        <span class="nl">Tuple2:</span><span class="o">:</span><span class="n">getField0</span><span class="o">,</span>
                        <span class="o">(</span><span class="n">t1</span><span class="o">,</span> <span class="n">t2</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="nc">Tuple2</span><span class="o">&lt;&gt;(</span><span class="n">t1</span><span class="o">.</span><span class="na">getField0</span><span class="o">(),</span> <span class="n">t1</span><span class="o">.</span><span class="na">getField1</span><span class="o">()</span> <span class="o">+</span> <span class="n">t2</span><span class="o">.</span><span class="na">getField1</span><span class="o">())</span>
                <span class="o">)</span>
                <span class="o">.</span><span class="na">withCardinalityEstimator</span><span class="o">(</span><span class="k">new</span> <span class="nc">DefaultCardinalityEstimator</span><span class="o">(</span><span class="mf">0.9</span><span class="o">,</span> <span class="mi">1</span><span class="o">,</span> <span class="kc">false</span><span class="o">,</span> <span class="n">in</span> <span class="o">-&gt;</span> <span class="nc">Math</span><span class="o">.</span><span class="na">round</span><span class="o">(</span><span class="mf">0.01</span> <span class="o">*</span> <span class="n">in</span><span class="o">[</span><span class="mi">0</span><span class="o">])))</span>
                <span class="o">.</span><span class="na">withName</span><span class="o">(</span><span class="s">"Add counters"</span><span class="o">)</span>

                <span class="c1">// Execute the plan and collect the results.</span>
                <span class="o">.</span><span class="na">collect</span><span class="o">();</span>

        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">wordcounts</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h4 id="scala-api">Scala API</h4>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">org.apache.wayang.api._</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.core.api.</span><span class="o">{</span><span class="nc">Configuration</span><span class="o">,</span> <span class="nc">WayangContext</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.java.Java</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.spark.Spark</span>

<span class="k">object</span> <span class="nc">WordcountScala</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>

    <span class="c1">// Settings</span>
    <span class="k">val</span> <span class="nv">inputUrl</span> <span class="k">=</span> <span class="s">"file:/tmp.txt"</span>

    <span class="c1">// Get a plan builder.</span>
    <span class="k">val</span> <span class="nv">wayangContext</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">WayangContext</span><span class="o">(</span><span class="k">new</span> <span class="nc">Configuration</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withPlugin</span><span class="o">(</span><span class="nv">Java</span><span class="o">.</span><span class="py">basicPlugin</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withPlugin</span><span class="o">(</span><span class="nv">Spark</span><span class="o">.</span><span class="py">basicPlugin</span><span class="o">)</span>
    <span class="k">val</span> <span class="nv">planBuilder</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">PlanBuilder</span><span class="o">(</span><span class="n">wayangContext</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withJobName</span><span class="o">(</span><span class="n">s</span><span class="s">"WordCount ($inputUrl)"</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withUdfJarsOf</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="py">getClass</span><span class="o">)</span>

    <span class="k">val</span> <span class="nv">wordcounts</span> <span class="k">=</span> <span class="n">planBuilder</span>
      <span class="c1">// Read the text file.</span>
      <span class="o">.</span><span class="py">readTextFile</span><span class="o">(</span><span class="n">inputUrl</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Load file"</span><span class="o">)</span>

      <span class="c1">// Split each line by non-word characters.</span>
      <span class="o">.</span><span class="py">flatMap</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">split</span><span class="o">(</span><span class="s">"\\W+"</span><span class="o">),</span> <span class="n">selectivity</span> <span class="k">=</span> <span class="mi">10</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Split words"</span><span class="o">)</span>

      <span class="c1">// Filter empty tokens.</span>
      <span class="o">.</span><span class="py">filter</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">nonEmpty</span><span class="o">,</span> <span class="n">selectivity</span> <span class="k">=</span> <span class="mf">0.99</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Filter empty words"</span><span class="o">)</span>

      <span class="c1">// Attach counter to each word.</span>
      <span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="n">word</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="nv">word</span><span class="o">.</span><span class="py">toLowerCase</span><span class="o">,</span> <span class="mi">1</span><span class="o">)).</span><span class="py">withName</span><span class="o">(</span><span class="s">"To lower case, add counter"</span><span class="o">)</span>

      <span class="c1">// Sum up counters for every word.</span>
      <span class="o">.</span><span class="py">reduceByKey</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">_1</span><span class="o">,</span> <span class="o">(</span><span class="n">c1</span><span class="o">,</span> <span class="n">c2</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="o">(</span><span class="nv">c1</span><span class="o">.</span><span class="py">_1</span><span class="o">,</span> <span class="nv">c1</span><span class="o">.</span><span class="py">_2</span> <span class="o">+</span> <span class="nv">c2</span><span class="o">.</span><span class="py">_2</span><span class="o">)).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Add counters"</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withCardinalityEstimator</span><span class="o">((</span><span class="n">in</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span> <span class="k">=&gt;</span> <span class="nv">math</span><span class="o">.</span><span class="py">round</span><span class="o">(</span><span class="n">in</span> <span class="o">*</span> <span class="mf">0.01</span><span class="o">))</span>

      <span class="c1">// Execute the plan and collect the results.</span>
      <span class="o">.</span><span class="py">collect</span><span class="o">()</span>

    <span class="nf">println</span><span class="o">(</span><span class="n">wordcounts</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="k-means">k-means</h3>

<p>Wayang is also capable of iterative processing, which is, e.g., very important for machine learning algorithms, such as k-means.</p>

<h4 id="scala-api-1">Scala API</h4>

<div class="language-scala highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">org.apache.wayang.api._</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.core.api.</span><span class="o">{</span><span class="nc">Configuration</span><span class="o">,</span> <span class="nc">WayangContext</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.core.function.FunctionDescriptor.ExtendedSerializableFunction</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.core.function.ExecutionContext</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.core.optimizer.costs.LoadProfileEstimators</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.java.Java</span>
<span class="k">import</span> <span class="nn">org.apache.wayang.spark.Spark</span>

<span class="k">import</span> <span class="nn">scala.util.Random</span>
<span class="k">import</span> <span class="nn">scala.collection.JavaConversions._</span>

<span class="k">object</span> <span class="nc">kmeans</span> <span class="o">{</span>
  <span class="k">def</span> <span class="nf">main</span><span class="o">(</span><span class="n">args</span><span class="k">:</span> <span class="kt">Array</span><span class="o">[</span><span class="kt">String</span><span class="o">])</span> <span class="o">{</span>

    <span class="c1">// Settings</span>
    <span class="k">val</span> <span class="nv">inputUrl</span> <span class="k">=</span> <span class="s">"file:/kmeans.txt"</span>
    <span class="k">val</span> <span class="nv">k</span> <span class="k">=</span> <span class="mi">5</span>
    <span class="k">val</span> <span class="nv">iterations</span> <span class="k">=</span> <span class="mi">100</span>
    <span class="k">val</span> <span class="nv">configuration</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Configuration</span>

    <span class="c1">// Get a plan builder.</span>
    <span class="k">val</span> <span class="nv">wayangContext</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">WayangContext</span><span class="o">(</span><span class="k">new</span> <span class="nc">Configuration</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withPlugin</span><span class="o">(</span><span class="nv">Java</span><span class="o">.</span><span class="py">basicPlugin</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withPlugin</span><span class="o">(</span><span class="nv">Spark</span><span class="o">.</span><span class="py">basicPlugin</span><span class="o">)</span>
    <span class="k">val</span> <span class="nv">planBuilder</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">PlanBuilder</span><span class="o">(</span><span class="n">wayangContext</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withJobName</span><span class="o">(</span><span class="n">s</span><span class="s">"k-means ($inputUrl, k=$k, $iterations iterations)"</span><span class="o">)</span>
      <span class="o">.</span><span class="py">withUdfJarsOf</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="py">getClass</span><span class="o">)</span>

    <span class="k">case</span> <span class="k">class</span> <span class="nc">Point</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Double</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">class</span> <span class="nc">TaggedPoint</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">cluster</span><span class="k">:</span> <span class="kt">Int</span><span class="o">)</span>
    <span class="k">case</span> <span class="k">class</span> <span class="nc">TaggedPointCounter</span><span class="o">(</span><span class="n">x</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">y</span><span class="k">:</span> <span class="kt">Double</span><span class="o">,</span> <span class="n">cluster</span><span class="k">:</span> <span class="kt">Int</span><span class="o">,</span> <span class="n">count</span><span class="k">:</span> <span class="kt">Long</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">def</span> <span class="nf">add_points</span><span class="o">(</span><span class="n">that</span><span class="k">:</span> <span class="kt">TaggedPointCounter</span><span class="o">)</span> <span class="k">=</span> <span class="nc">TaggedPointCounter</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="py">x</span> <span class="o">+</span> <span class="nv">that</span><span class="o">.</span><span class="py">x</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="py">y</span> <span class="o">+</span> <span class="nv">that</span><span class="o">.</span><span class="py">y</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="py">cluster</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="py">count</span> <span class="o">+</span> <span class="nv">that</span><span class="o">.</span><span class="py">count</span><span class="o">)</span>
      <span class="k">def</span> <span class="nf">average</span> <span class="k">=</span> <span class="nc">TaggedPointCounter</span><span class="o">(</span><span class="n">x</span> <span class="o">/</span> <span class="n">count</span><span class="o">,</span> <span class="n">y</span> <span class="o">/</span> <span class="n">count</span><span class="o">,</span> <span class="n">cluster</span><span class="o">,</span> <span class="mi">0</span><span class="o">)</span>
    <span class="o">}</span>

    <span class="c1">// Read and parse the input file(s).</span>
    <span class="k">val</span> <span class="nv">points</span> <span class="k">=</span> <span class="n">planBuilder</span>
      <span class="o">.</span><span class="py">readTextFile</span><span class="o">(</span><span class="n">inputUrl</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Read file"</span><span class="o">)</span>
      <span class="o">.</span><span class="py">map</span> <span class="o">{</span> <span class="n">line</span> <span class="k">=&gt;</span>
        <span class="k">val</span> <span class="nv">fields</span> <span class="k">=</span> <span class="nv">line</span><span class="o">.</span><span class="py">split</span><span class="o">(</span><span class="s">","</span><span class="o">)</span>
        <span class="nc">Point</span><span class="o">(</span><span class="nf">fields</span><span class="o">(</span><span class="mi">0</span><span class="o">).</span><span class="py">toDouble</span><span class="o">,</span> <span class="nf">fields</span><span class="o">(</span><span class="mi">1</span><span class="o">).</span><span class="py">toDouble</span><span class="o">)</span>
      <span class="o">}.</span><span class="py">withName</span><span class="o">(</span><span class="s">"Create points"</span><span class="o">)</span>


    <span class="c1">// Create initial centroids.</span>
    <span class="k">val</span> <span class="nv">random</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Random</span>
    <span class="k">val</span> <span class="nv">initialCentroids</span> <span class="k">=</span> <span class="n">planBuilder</span>
      <span class="o">.</span><span class="py">loadCollection</span><span class="o">(</span><span class="nf">for</span> <span class="o">(</span><span class="n">i</span> <span class="k">&lt;-</span> <span class="mi">1</span> <span class="n">to</span> <span class="n">k</span><span class="o">)</span> <span class="k">yield</span> <span class="nc">TaggedPointCounter</span><span class="o">(</span><span class="nv">random</span><span class="o">.</span><span class="py">nextGaussian</span><span class="o">(),</span> <span class="nv">random</span><span class="o">.</span><span class="py">nextGaussian</span><span class="o">(),</span> <span class="n">i</span><span class="o">,</span> <span class="mi">0</span><span class="o">)).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Load random centroids"</span><span class="o">)</span>

    <span class="c1">// Declare UDF to select centroid for each data point.</span>
    <span class="k">class</span> <span class="nc">SelectNearestCentroid</span> <span class="k">extends</span> <span class="nc">ExtendedSerializableFunction</span><span class="o">[</span><span class="kt">Point</span>, <span class="kt">TaggedPointCounter</span><span class="o">]</span> <span class="o">{</span>

      <span class="cm">/** Keeps the broadcasted centroids. */</span>
      <span class="k">var</span> <span class="n">centroids</span><span class="k">:</span> <span class="kt">Iterable</span><span class="o">[</span><span class="kt">TaggedPointCounter</span><span class="o">]</span> <span class="k">=</span> <span class="k">_</span>

      <span class="k">override</span> <span class="k">def</span> <span class="nf">open</span><span class="o">(</span><span class="n">executionCtx</span><span class="k">:</span> <span class="kt">ExecutionContext</span><span class="o">)</span> <span class="k">=</span> <span class="o">{</span>
        <span class="n">centroids</span> <span class="k">=</span> <span class="nv">executionCtx</span><span class="o">.</span><span class="py">getBroadcast</span><span class="o">[</span><span class="kt">TaggedPointCounter</span><span class="o">](</span><span class="s">"centroids"</span><span class="o">)</span>
      <span class="o">}</span>

      <span class="k">override</span> <span class="k">def</span> <span class="nf">apply</span><span class="o">(</span><span class="n">point</span><span class="k">:</span> <span class="kt">Point</span><span class="o">)</span><span class="k">:</span> <span class="kt">TaggedPointCounter</span> <span class="o">=</span> <span class="o">{</span>
        <span class="k">var</span> <span class="n">minDistance</span> <span class="k">=</span> <span class="nv">Double</span><span class="o">.</span><span class="py">PositiveInfinity</span>
        <span class="k">var</span> <span class="n">nearestCentroidId</span> <span class="k">=</span> <span class="o">-</span><span class="mi">1</span>
        <span class="nf">for</span> <span class="o">(</span><span class="n">centroid</span> <span class="k">&lt;-</span> <span class="n">centroids</span><span class="o">)</span> <span class="o">{</span>
          <span class="k">val</span> <span class="nv">distance</span> <span class="k">=</span> <span class="nv">Math</span><span class="o">.</span><span class="py">pow</span><span class="o">(</span><span class="nv">Math</span><span class="o">.</span><span class="py">pow</span><span class="o">(</span><span class="nv">point</span><span class="o">.</span><span class="py">x</span> <span class="o">-</span> <span class="nv">centroid</span><span class="o">.</span><span class="py">x</span><span class="o">,</span> <span class="mi">2</span><span class="o">)</span> <span class="o">+</span> <span class="nv">Math</span><span class="o">.</span><span class="py">pow</span><span class="o">(</span><span class="nv">point</span><span class="o">.</span><span class="py">y</span> <span class="o">-</span> <span class="nv">centroid</span><span class="o">.</span><span class="py">y</span><span class="o">,</span> <span class="mi">2</span><span class="o">),</span> <span class="mf">0.5</span><span class="o">)</span>
          <span class="nf">if</span> <span class="o">(</span><span class="n">distance</span> <span class="o">&lt;</span> <span class="n">minDistance</span><span class="o">)</span> <span class="o">{</span>
            <span class="n">minDistance</span> <span class="k">=</span> <span class="n">distance</span>
            <span class="n">nearestCentroidId</span> <span class="k">=</span> <span class="nv">centroid</span><span class="o">.</span><span class="py">cluster</span>
          <span class="o">}</span>
        <span class="o">}</span>
        <span class="k">new</span> <span class="nc">TaggedPointCounter</span><span class="o">(</span><span class="nv">point</span><span class="o">.</span><span class="py">x</span><span class="o">,</span> <span class="nv">point</span><span class="o">.</span><span class="py">y</span><span class="o">,</span> <span class="n">nearestCentroidId</span><span class="o">,</span> <span class="mi">1</span><span class="o">)</span>
      <span class="o">}</span>
    <span class="o">}</span>

    <span class="c1">// Do the k-means loop.</span>
    <span class="k">val</span> <span class="nv">finalCentroids</span> <span class="k">=</span> <span class="nv">initialCentroids</span><span class="o">.</span><span class="py">repeat</span><span class="o">(</span><span class="n">iterations</span><span class="o">,</span> <span class="o">{</span> <span class="n">currentCentroids</span> <span class="k">=&gt;</span>
      <span class="n">points</span>
        <span class="o">.</span><span class="py">mapJava</span><span class="o">(</span><span class="k">new</span> <span class="nc">SelectNearestCentroid</span><span class="o">,</span>
          <span class="n">udfLoad</span> <span class="k">=</span> <span class="nv">LoadProfileEstimators</span><span class="o">.</span><span class="py">createFromSpecification</span><span class="o">(</span>
            <span class="s">"my.udf.costfunction.key"</span><span class="o">,</span> <span class="n">configuration</span>
          <span class="o">))</span>
        <span class="o">.</span><span class="py">withBroadcast</span><span class="o">(</span><span class="n">currentCentroids</span><span class="o">,</span> <span class="s">"centroids"</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Find nearest centroid"</span><span class="o">)</span>
        <span class="o">.</span><span class="py">reduceByKey</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">cluster</span><span class="o">,</span> <span class="nv">_</span><span class="o">.</span><span class="py">add_points</span><span class="o">(</span><span class="k">_</span><span class="o">)).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Add up points"</span><span class="o">)</span>
        <span class="o">.</span><span class="py">withCardinalityEstimator</span><span class="o">(</span><span class="n">k</span><span class="o">)</span>
        <span class="o">.</span><span class="py">map</span><span class="o">(</span><span class="nv">_</span><span class="o">.</span><span class="py">average</span><span class="o">).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Average points"</span><span class="o">)</span>
    <span class="o">}).</span><span class="py">withName</span><span class="o">(</span><span class="s">"Loop"</span><span class="o">)</span>

      <span class="c1">// Collect the results.</span>
      <span class="o">.</span><span class="py">collect</span><span class="o">()</span>

    <span class="nf">println</span><span class="o">(</span><span class="n">finalCentroids</span><span class="o">)</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="license">License</h2>

<p>All files in this repository are licensed under the Apache Software License 2.0</p>

<p>Copyright 2020 Apache (incubating) Wayang Team</p>

<p>Licensed under the Apache License, Version 2.0 (the “License”);
you may not use this file except in compliance with the License.
You may obtain a copy of the License at</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>http://www.apache.org/licenses/LICENSE-2.0
</code></pre></div></div>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

      <div class="row btn-area-page" >
        <div class="col-md-6">
          
          <a href="/" class="d-flex align-items-center page-btn shadow">
              <div class="mr-auto">
                <i class="fas fa-arrow-left fa-4x"></i>
              </div>
              <div class="text-right" >
                <strong>Previous Page</strong>
                <p class="title-page-btn">
                  Previous
                </p>
              </div>
          </a>
          
        </div>
        <div class="col-md-6">
          
          <a href="/" class="d-flex align-items-center page-btn shadow" >
            <div class="text-left" >
              <strong>Next Page</strong>
              <p class="title-page-btn">
                Next
              </p>
            </div>
            <div class="ml-auto">
              <i class="fas fa-arrow-right  fa-4x"></i>
            </div>
          </a>
          
        </div>
      </div>

<footer class="footer position-sticky sticky-bottom">
    <nav class="navbar navbar-light bg-light"  style="background: #A6A6A6;">
        <div class="container">
            <div class="row">
                <div class="col text-center">
                    <a href="http://incubator.apache.org/" >
                        <img style="max-height: 15vw" src="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/img/egg-logo.png">
                    </a>
                    <br />
                    <p style="text-align: justify">
                        Apache Wayang is an effort undergoing Incubation at The Apache Software Foundation (ASF), sponsored by the Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.
                    </p>
                    <p class="text-center">
                        Copyright &#169; 2021 The Apache Software Foundation.<br />
                        Licensed under the Apache License, Version 2.0.<br />
                        Apache, the Apache Feather logo, and the Apache Incubator project logo are trademarks of The Apache Software Foundation.
                    </p>
                </div>
            </div>
        </div>
    </nav>
</footer>
</main>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>

<script src="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/js/add_numbers.js"></script>
<script src="https://wayang.apache.org/docs/0.6.0-SNAPSHOT/assets/js/menu.js"></script>
</body>

</html>
